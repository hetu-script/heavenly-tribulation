import 'place/place.json5' as placeNames
import 'place/postfix.json5' as placePostfix
import 'place/location.json5' as locationNames
import 'common/strange.json5' as strangeNames
import 'common.ht'

fun generateLocationName({category: str}) {
  var name = ''
  category ??= random.nextIterable(locationNames.keys)
  final kind = random.nextIterable(locationNames[category])
  var rarity = 'common'
  final r = random.nextDouble()
  if (r < kStrangeNameProbability) {
    name = random.nextIterable(strangeNames)
    rarity = 'rare'
  } else if (r < kXianXiaNameProbability) {
    name = random.nextIterable(commonNames)
    rarity = 'uncommon'
  } else {
    var postfix = ''
    if (random.nextDouble() < kNameWithDirectionProbability) {
      postfix = random.nextIterable(placePostfix)
    }
    name = random.nextIterable(placeNames) + postfix
  }
  return { name: name + kind, category, rarity }
}
