# 河图脚本功能

添加 switch case 的灵活性，不用 case 时，需要用{}包裹分支代码块，
但用 case 时，可以省略{}，而是用冒号和下一个 case 来判断分支代码块范围

# 重要事项

门派成员可以在任意一个门派拥有的据点的会堂中休息。

非门派成员支付的租金会受到门派关系的影响。敌对门派无法租用，关系更好的门派之间租金更低。

农场、林场、渔场、猎场、矿场，也可以直接购买材料，而且价格还会更便宜一些。

进阶境界会增加生命值。

速度和闪避会同时给防御，增加一点卡牌可用性。

制作傀儡，相当于制作一个伙伴，但有使用次数。傀儡的卡组不能修改。

港口类型的城市，必然会出售船只
附近有山地的城市，必然会出售登山靴

补全地牢遭遇种类

三个门改成两种，然后每次从之前的三个门之中随机，但玩家仍然能看到门后的内容，这样保持一定选择的同时，增加一些随机性

秘境石改为不可堆叠，并且每个秘境石自身也会有一个词缀系统（类似 POE）

在聚灵阵打坐时，如果聚灵阵本身的灵光已经消耗完毕，可以自动切换为消耗灵石的模式。同时身上的灵石数量和可收集灵光会同时显示。

学会煞气后，之前击败过的敌人，但未获得的煞气，会一并返还。

heroRest 时，添加金钱消耗计算，用于酒店的住宿业务

炼器相关界面和 API

国家和国家之间的关系

在 scene cotroller 中记录当前栈上的场景和参数，再次载入游戏时，按照原样复原（主要用于地图场景）这样据点场景中也可以保存，下次进入会直接进入该场景

每个月计算一次名声

修炼界面添加一个女性打坐图片

所有建筑的修建、升级和功能

装备窗口增加一个角色站立的像素动画

# 其他事项

每次启动游戏，游戏 print 的内容输出到一个文本文件，并保存最近的五个文件，用来检查错误，与此同时每次出错，自动将整个游戏存档另存为

物品菜单中，只有丢弃时，多了一个分隔符。

计算量比较大的代码逐步挪到 dart 里面，以改善效率

合并 locationView 和 editLocation

脚本中统一加上`;`，以和 Dart 侧代码风格统一。

给 world information 窗口添加一个材料物价表

游戏内等级其实在某些情况下可以超出游戏上限，例如满级后的秘境难度提升等。

promptJournal 改成通用的窗口，不需要和日志相关，也可是关键信息提示等等。

物品充能也可以用别的材料，例如毒药

格式化文字时，加一个最大宽度的参数，如果宽度超过，将 fontsize 减小直到可以放下或者达到最小

载入场景时，先通过 state 告知开始载入，最后再通过 state 通知载入结束

标题 LOGO 是空心字，背后有纹理在流动

逐步将所有核心逻辑移动到 Dart 侧，并改为 external function 的形式

json 的 key 中统一用下划线代替圆点

给卡牌上加两个小图标：境界和流派

合并一些 common.dart 文件到一起

每个流派的卡牌统一背景颜色用来增加辨识度：
中立：纯白
悟道：浅绿
御剑：淡蓝
锻体：朱红
法身：橙黄
炼魂：漆黑

物品栏等窗口改为从窗口左侧侧栏按钮打开，顶部状态栏摊平铺满

任务、历史等区域的文本更换为富文本

历史中的项目（角色、地点、任务）可以点击并打开对应面板
