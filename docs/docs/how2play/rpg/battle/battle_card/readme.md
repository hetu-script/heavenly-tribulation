# 卡牌

卡牌代表了功法和招式，是战斗的核心。

## 获得

1，战斗后，会有一定几率得到对方卡组中的一张卡牌。每个 npc 每个月只能切磋一次。而生死之战会杀死对方，所以只有一次机会。

2，通过打坐冥想，消耗游戏内的时间来获得卡包。

3，通关副本，完成任务，有可能直接获得卡包。

## 使用

每个流派能获得该流派本身的卡牌。

使用卡牌只受到境界和装备的限制，卡牌没有等级或者流派的限制。

## 卡牌词条

每个流派有数张不同的固定词条的卡牌，它们会有一个固定的词条，这个固定词条本身决定了卡牌的类型（拳法，咒语，法术等等）

每张卡牌，根据其境界，还可能拥有其他词条，这些随机词条从该类型和流派的全部词条中随机选取。

## 卡牌需求

角色需要达到主词条的境界要求才能使用卡牌
如果是主流派卡牌还需要解锁该流派天赋入口
流派还决定了卡牌如何获取

## 鉴定

卡牌的主词条是可以直接看到并使用的。

但卡牌的额外词条及其效果，需要鉴定后才能使用。拥有多个额外词条的卡牌，每次鉴定只能揭示其中一个效果。

## 卡牌类型

攻击（普通攻击，法术攻击或使对方获得减益）
加持（自身获得资源或增益）
持续（持续数个回合，通常是在某个时机，例如回合开始时或发动攻击时产生效果）
消耗（用完会被销毁，战斗后也将不存在）

1，每种类型卡牌有单独的词条列表
2，每个词条都会有自己的灵气消耗（可能为负或者百分比），卡牌总消耗为所有词缀的灵气消耗之和

## 词条等级、卡牌等级、卡牌境界

词条本身可以通过卡牌升级强化。但词条等级不能超过卡牌等级。
随机生成的卡牌，其词条等级也是在 1-卡牌等级之间随机的。
词条本身的随机值只能通过精炼·混元调整。
化神或以上可能有 1/20 的几率得到太古词条，太古词条是普通词条数值最大值的 1.5 倍。只能在化神或一上境界的卡牌上才能出现。

卡牌本身可以被精炼
卡牌升级会附带卡牌主词条的升级。

提升境界后会增加词条数量的下限和上限。
提升境界后，如果词条数量不足下限，会随机增加词条。

| 卡牌境界 | 基础词条 | 额外词条 | 太古词条 |
| -------- | -------- | -------- | -------- |
| 无       | 1        | 0        | 0        |
| 凝气     | 1        | 0-2      | 0        |
| 筑基     | 1        | 1-3      | 0        |
| 结丹     | 1        | 2-4      | 0-1      |
| 还婴     | 1        | 3-5      | 1-2      |
| 化神     | 1        | 4-6      | 2-3      |

主词条的属性是固定的，但会随着等级提升而提升。

额外词条的等级是随机的，具体取值在当前境界的等级上下限之间。

额外词条的等级只能通过精炼·混元调整，但满值的太古词条只能在化神或以上境界的卡牌上才能出现。并且每个境界太古词条总数量有上限。达到上限后，就不能再获得太古词条。

## 精炼

精炼需要消耗灵气

精炼可以撤回，但不会返还已经消耗的灵气

### 精炼·灵宝

随机增加一个额外词条（不能超过境界允许的词条上限）

### 精炼·神照

随机替换一个额外词条

### 精炼·混元

随机化词条的等级。词条的等级最大值等于主词条的等级，也就是卡牌等级。

### 精炼·破境

提升境界有成功几率

```javascript
function getCardRankUpProbability(rank) {
  if (rank == 0) return 1.0;
  if (rank >= kCultivationRankMax) return 0.0;
  return 0.7 * (1 - rank / kCultivationRankMax);
}
```

提升卡牌境界（卡牌本身升级满后才能提升境界，每个境界需要的材料不同）

打造卡牌词缀时，只能从角色已知的词条库中随机获取
获得新卡牌并领悟后，可以将新词条加入词条库

# 特殊卡牌

## 符箓

符箓可以将任何非符箓、阵法、丹药、音乐的卡牌，转化为符箓牌。

符箓牌将会消除流派的需求。只要满足境界，任何角色都可以使用。

战斗结束后，符箓卡牌会扣减使用次数，直至消失

## 阵法

## 丹药

## 音乐
